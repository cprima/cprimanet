
{% assign checklistnames = include.checklistnames | split: "," %}

{% for checklistname in checklistnames %}
{% if forloop.first %}
{% if checklistnames.size > 1 %}
<h2>Checklists</h2>
{% else %}
<h2>Checklist</h2>
{% endif %}
{% endif %}

{% assign needle = checklistname | strip %}

{% assign checklistentries = site.data.checklists | where:"checklistname", needle %}

<table class="checklistentries" border="1">
  {% for row in checklistentries %}
    {% if forloop.first %}
    <tr>
        <th colspan="2">{{ row.checklistname }}</th>
    </tr>
    {% endif %}

    <tr>
    {% for pair in row %}
    {% if pair[0] == "key" %}
      <td class="key">{{ pair[1] }}</td>
    {% elsif pair[0] == "value" %}
      <td class="value">{{ pair[1] }}</td>
    {% endif %}
    {% endfor %}
    </tr>
  {% endfor %}
</table>

{% if forloop.last -%}
{%- else -%}
<hr />
{%- endif -%}
{% endfor %}
