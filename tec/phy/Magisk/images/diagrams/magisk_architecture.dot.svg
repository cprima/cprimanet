<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: magisk_architecture Pages: 1 -->
<svg width="624pt" height="555pt"
 viewBox="0.00 0.00 624.26 555.20" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 551.2)">
<title>magisk_architecture</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-551.2 620.2616,-551.2 620.2616,4 -4,4"/>
<!-- boot_image -->
<g id="node1" class="node">
<title>boot_image</title>
<polygon fill="none" stroke="#000000" points="211.0395,-547.0019 88.9605,-547.0019 88.9605,-505.7981 211.0395,-505.7981 211.0395,-547.0019"/>
<text text-anchor="middle" x="150" y="-530.6" font-family="Times,serif" font-size="14.00" fill="#000000">Boot Image</text>
<text text-anchor="middle" x="150" y="-513.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Contains ramdisk</text>
</g>
<!-- overlay_fs -->
<g id="node2" class="node">
<title>overlay_fs</title>
<polygon fill="none" stroke="#000000" points="241.3655,-452.6019 74.6345,-452.6019 74.6345,-411.3981 241.3655,-411.3981 241.3655,-452.6019"/>
<text text-anchor="middle" x="158" y="-436.2" font-family="Times,serif" font-size="14.00" fill="#000000">Overlay Filesystem</text>
<text text-anchor="middle" x="158" y="-419.4" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Systemless modifications</text>
</g>
<!-- boot_image&#45;&gt;overlay_fs -->
<g id="edge1" class="edge">
<title>boot_image&#45;&gt;overlay_fs</title>
<path fill="none" stroke="#000000" d="M149.5896,-505.7589C149.5799,-495.2668 149.8725,-482.3294 151.0084,-470.8 151.2609,-468.2371 151.5902,-465.5895 151.9683,-462.9373"/>
<polygon fill="#000000" stroke="#000000" points="155.4571,-463.2884 153.6089,-452.856 148.548,-462.1639 155.4571,-463.2884"/>
<text text-anchor="middle" x="176.4958" y="-475" font-family="Times,serif" font-size="14.00" fill="#000000">modifies</text>
</g>
<!-- su_binary -->
<g id="node3" class="node">
<title>su_binary</title>
<polygon fill="none" stroke="#000000" points="265.2766,-358.2019 138.7234,-358.2019 138.7234,-316.9981 265.2766,-316.9981 265.2766,-358.2019"/>
<text text-anchor="middle" x="202" y="-341.8" font-family="Times,serif" font-size="14.00" fill="#000000">`su` Binary</text>
<text text-anchor="middle" x="202" y="-325" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Grants root access</text>
</g>
<!-- overlay_fs&#45;&gt;su_binary -->
<g id="edge2" class="edge">
<title>overlay_fs&#45;&gt;su_binary</title>
<path fill="none" stroke="#000000" d="M167.765,-411.0496C173.6894,-398.3391 181.3495,-381.9048 187.9212,-367.8055"/>
<polygon fill="#000000" stroke="#000000" points="191.2099,-369.0343 192.2623,-358.4919 184.8652,-366.077 191.2099,-369.0343"/>
<text text-anchor="middle" x="201.2728" y="-380.6" font-family="Times,serif" font-size="14.00" fill="#000000">injects</text>
</g>
<!-- safetynet -->
<g id="node10" class="node">
<title>safetynet</title>
<polygon fill="none" stroke="#000000" points="174.1645,-41.4019 1.8355,-41.4019 1.8355,-.1981 174.1645,-.1981 174.1645,-41.4019"/>
<text text-anchor="middle" x="88" y="-25" font-family="Times,serif" font-size="14.00" fill="#000000">SafetyNet</text>
<text text-anchor="middle" x="88" y="-8.2" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Google&#39;s tamper detection</text>
</g>
<!-- overlay_fs&#45;&gt;safetynet -->
<g id="edge10" class="edge">
<title>overlay_fs&#45;&gt;safetynet</title>
<path fill="none" stroke="#000000" d="M74.3734,-413.8608C36.4743,-400.2304 0,-376.9029 0,-337.6 0,-337.6 0,-337.6 0,-123.6 0,-92.392 23.6945,-65.8921 46.4933,-47.6172"/>
<polygon fill="#000000" stroke="#000000" points="48.6679,-50.3604 54.4799,-41.5019 44.4123,-44.8025 48.6679,-50.3604"/>
<text text-anchor="middle" x="30.1308" y="-230.6" font-family="Times,serif" font-size="14.00" fill="#000000">hides from</text>
</g>
<!-- zygote -->
<g id="node5" class="node">
<title>zygote</title>
<polygon fill="none" stroke="#000000" points="309.3557,-264.2014 142.6443,-264.2014 142.6443,-205.3986 309.3557,-205.3986 309.3557,-264.2014"/>
<text text-anchor="middle" x="226" y="-247.4" font-family="Times,serif" font-size="14.00" fill="#000000">Zygote Process</text>
<text text-anchor="middle" x="226" y="-230.6" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; First Android OS process</text>
<text text-anchor="middle" x="226" y="-213.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Manages app processes</text>
</g>
<!-- su_binary&#45;&gt;zygote -->
<g id="edge6" class="edge">
<title>su_binary&#45;&gt;zygote</title>
<path fill="none" stroke="#000000" d="M206.8568,-316.7969C209.728,-304.4984 213.4571,-288.5256 216.8602,-273.9486"/>
<polygon fill="#000000" stroke="#000000" points="220.2844,-274.6761 219.1497,-264.1423 213.4677,-273.0846 220.2844,-274.6761"/>
<text text-anchor="middle" x="279.5484" y="-286.2" font-family="Times,serif" font-size="14.00" fill="#000000">previously hooked into</text>
</g>
<!-- su_binary&#45;&gt;safetynet -->
<g id="edge11" class="edge">
<title>su_binary&#45;&gt;safetynet</title>
<path fill="none" stroke="#000000" d="M177.229,-316.7701C162.5885,-303.175 144.8484,-284.2395 134,-264 96.8204,-194.6355 89.2949,-100.0437 88.0227,-51.8239"/>
<polygon fill="#000000" stroke="#000000" points="91.52,-51.6419 87.8312,-41.71 84.5212,-51.7745 91.52,-51.6419"/>
<text text-anchor="middle" x="136.1308" y="-175" font-family="Times,serif" font-size="14.00" fill="#000000">hides from</text>
</g>
<!-- manager -->
<g id="node4" class="node">
<title>manager</title>
<polygon fill="none" stroke="#000000" points="436.7059,-547.0019 287.2941,-547.0019 287.2941,-505.7981 436.7059,-505.7981 436.7059,-547.0019"/>
<text text-anchor="middle" x="362" y="-530.6" font-family="Times,serif" font-size="14.00" fill="#000000">Magisk Manager</text>
<text text-anchor="middle" x="362" y="-513.8" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Management interface</text>
</g>
<!-- manager&#45;&gt;overlay_fs -->
<g id="edge5" class="edge">
<title>manager&#45;&gt;overlay_fs</title>
<path fill="none" stroke="#000000" d="M287.2106,-511.8978C265.7426,-506.064 242.805,-498.1487 223.021,-487.6 215.3519,-483.5109 201.106,-471.5407 187.8993,-459.7497"/>
<polygon fill="#000000" stroke="#000000" points="190.0688,-456.9929 180.3011,-452.889 185.3776,-462.1884 190.0688,-456.9929"/>
<text text-anchor="middle" x="248.4895" y="-475" font-family="Times,serif" font-size="14.00" fill="#000000">manages</text>
</g>
<!-- manager&#45;&gt;su_binary -->
<g id="edge3" class="edge">
<title>manager&#45;&gt;su_binary</title>
<path fill="none" stroke="#000000" d="M342.5688,-505.7641C328.984,-491.1741 310.5463,-471.0435 294.899,-452.8 270.1695,-423.9672 243.0193,-390.0153 224.4923,-366.4733"/>
<polygon fill="#000000" stroke="#000000" points="227.0045,-364.0053 218.0771,-358.2998 221.498,-368.3272 227.0045,-364.0053"/>
<text text-anchor="middle" x="317.5505" y="-427.8" font-family="Times,serif" font-size="14.00" fill="#000000">controls</text>
</g>
<!-- dynamic_mgmt -->
<g id="node9" class="node">
<title>dynamic_mgmt</title>
<polygon fill="none" stroke="#000000" points="492.9012,-452.6019 349.0988,-452.6019 349.0988,-411.3981 492.9012,-411.3981 492.9012,-452.6019"/>
<text text-anchor="middle" x="421" y="-436.2" font-family="Times,serif" font-size="14.00" fill="#000000">Dynamic Management</text>
<text text-anchor="middle" x="421" y="-419.4" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; On&#45;the&#45;fly settings</text>
</g>
<!-- manager&#45;&gt;dynamic_mgmt -->
<g id="edge4" class="edge">
<title>manager&#45;&gt;dynamic_mgmt</title>
<path fill="none" stroke="#000000" d="M375.094,-505.4496C383.1908,-492.4946 393.7054,-475.6713 402.6283,-461.3947"/>
<polygon fill="#000000" stroke="#000000" points="405.6106,-463.2269 407.9426,-452.8919 399.6746,-459.5168 405.6106,-463.2269"/>
</g>
<!-- manager&#45;&gt;safetynet -->
<g id="edge12" class="edge">
<title>manager&#45;&gt;safetynet</title>
<path fill="none" stroke="#000000" d="M433.9628,-505.788C489.1732,-487.7655 556,-460.1391 556,-432 556,-432 556,-432 556,-123.6 556,-47.8375 514.8136,-100.9044 184.1642,-41.5629"/>
<polygon fill="#000000" stroke="#000000" points="184.7609,-38.1141 174.297,-39.7742 183.5123,-45.0019 184.7609,-38.1141"/>
<text text-anchor="middle" x="586.1308" y="-286.2" font-family="Times,serif" font-size="14.00" fill="#000000">hides from</text>
</g>
<!-- zygisk -->
<g id="node6" class="node">
<title>zygisk</title>
<polygon fill="none" stroke="#000000" points="336.0028,-153.0014 115.9972,-153.0014 115.9972,-94.1986 336.0028,-94.1986 336.0028,-153.0014"/>
<text text-anchor="middle" x="226" y="-136.2" font-family="Times,serif" font-size="14.00" fill="#000000">Zygisk</text>
<text text-anchor="middle" x="226" y="-119.4" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Magisk in Zygote</text>
<text text-anchor="middle" x="226" y="-102.6" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; New way to run root apps/modules</text>
</g>
<!-- zygote&#45;&gt;zygisk -->
<g id="edge8" class="edge">
<title>zygote&#45;&gt;zygisk</title>
<path fill="none" stroke="#000000" d="M226,-205.5835C226,-192.6614 226,-177.2642 226,-163.3212"/>
<polygon fill="#000000" stroke="#000000" points="229.5001,-163.0074 226,-153.0074 222.5001,-163.0075 229.5001,-163.0074"/>
<text text-anchor="middle" x="253.2083" y="-175" font-family="Times,serif" font-size="14.00" fill="#000000">facilitates</text>
</g>
<!-- apps -->
<g id="node7" class="node">
<title>apps</title>
<polygon fill="none" stroke="#000000" points="528.2352,-144.2019 353.7648,-144.2019 353.7648,-102.9981 528.2352,-102.9981 528.2352,-144.2019"/>
<text text-anchor="middle" x="441" y="-127.8" font-family="Times,serif" font-size="14.00" fill="#000000">Regular Apps</text>
<text text-anchor="middle" x="441" y="-111" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Netflix, Banking apps, etc.</text>
</g>
<!-- zygote&#45;&gt;apps -->
<g id="edge7" class="edge">
<title>zygote&#45;&gt;apps</title>
<path fill="none" stroke="#000000" d="M282.4887,-205.5835C316.4921,-187.9966 359.3599,-165.825 391.9395,-148.9745"/>
<polygon fill="#000000" stroke="#000000" points="393.5655,-152.074 400.8399,-144.3712 390.3497,-145.8564 393.5655,-152.074"/>
<text text-anchor="middle" x="371.4895" y="-175" font-family="Times,serif" font-size="14.00" fill="#000000">launches</text>
</g>
<!-- root_apps -->
<g id="node8" class="node">
<title>root_apps</title>
<polygon fill="none" stroke="#000000" points="385.4264,-41.4019 192.5736,-41.4019 192.5736,-.1981 385.4264,-.1981 385.4264,-41.4019"/>
<text text-anchor="middle" x="289" y="-25" font-family="Times,serif" font-size="14.00" fill="#000000">Root Apps &amp; Modules</text>
<text text-anchor="middle" x="289" y="-8.2" font-family="Times,serif" font-size="14.00" fill="#000000">&#45; Run within Zygote via Zygisk</text>
</g>
<!-- zygisk&#45;&gt;root_apps -->
<g id="edge9" class="edge">
<title>zygisk&#45;&gt;root_apps</title>
<path fill="none" stroke="#000000" d="M244.0533,-94.1416C252.524,-80.3195 262.5919,-63.8913 271.0497,-50.0904"/>
<polygon fill="#000000" stroke="#000000" points="274.1011,-51.8095 276.3422,-41.4544 268.1327,-48.1518 274.1011,-51.8095"/>
<text text-anchor="middle" x="277.0526" y="-63.8" font-family="Times,serif" font-size="14.00" fill="#000000">runs</text>
</g>
<!-- zygisk&#45;&gt;safetynet -->
<g id="edge13" class="edge">
<title>zygisk&#45;&gt;safetynet</title>
<path fill="none" stroke="#000000" d="M186.4547,-94.1416C166.7511,-79.4638 143.1024,-61.8473 123.9213,-47.5588"/>
<polygon fill="#000000" stroke="#000000" points="125.8371,-44.6215 115.7267,-41.4544 121.6553,-50.2352 125.8371,-44.6215"/>
<text text-anchor="middle" x="192.1308" y="-63.8" font-family="Times,serif" font-size="14.00" fill="#000000">hides from</text>
</g>
</g>
</svg>
