# Debnian packages

## Requirements

apt-get install debhelper
debscripts
(fakeroot)


## problem

have script, want to install and run with systemd

## solution

https://stackoverflow.com/questions/17401381/debianzing-a-python-program-to-get-a-deb

The right way of building a deb package is using dpkg-buildpackage, but sometimes it is a little bit complicated. Instead you can use dpkg -b <folder> and it will create your Debian package.

```bash
dietpi@habub:~/mypackaging/abovyan-0.5$ tree
.
├── abovyan
└── debian
    ├── abovyan
    │   ├── DEBIAN
    │   │   ├── control
    │   │   ├── md5sums
    │   │   ├── postinst
    │   │   ├── postrm
    │   │   └── prerm
    │   ├── lib
    │   │   └── systemd
    │   │       └── system
    │   │           └── abovyan.service
    │   └── usr
    │       ├── bin
    │       │   └── abovyan
    │       └── share
    │           └── doc
    │               └── abovyan
    │                   └── changelog.gz
    ├── changelog
    ├── control
    └── rules

11 directories, 12 files
dietpi@habub:~/mypackaging/abovyan-0.5$
```


```bash
dpkg-buildpackage -uc -us
```

Result:

```bash
dietpi@habub:~/mypackaging/abovyan-0.5$ tree
.
├── abovyan
└── debian
    ├── abovyan
    │   ├── DEBIAN
    │   │   ├── control
    │   │   ├── md5sums
    │   │   ├── postinst
    │   │   ├── postrm
    │   │   └── prerm
    │   ├── lib
    │   │   └── systemd
    │   │       └── system
    │   │           └── abovyan.service
    │   └── usr
    │       └── share
    │           └── doc
    │               └── abovyan
    │                   └── changelog.gz
    ├── abovyan.postrm.debhelper
    ├── abovyan.service
    ├── abovyan.substvars
    ├── changelog
    ├── control
    ├── debhelper-build-stamp
    ├── files
    └── rules

10 directories, 16 files
```

## Tipps

dpkg-architecture -L

https://unix.stackexchange.com/a/627702
usually generated by dh_installsystemd, but that only works for source packages, not binary packages


## Links

https://www.debian.org/doc/debian-policy/ch-controlfields.html

https://tracker.debian.org/pkg/stdeb

https://www.debian.org/doc/manuals/maint-guide/dreq.en.html#rules

https://pypi.org/project/stdeb/

https://unix.stackexchange.com/questions/627689/how-to-create-a-debian-package-from-a-bash-script-and-a-systemd-service

https://unix.stackexchange.com/questions/627689/how-to-create-a-debian-package-from-a-bash-script-and-a-systemd-service


https://krzysztofzuraw.com/blog/2017/building-python-packages-for-debian/index.html

